{"ast":null,"code":"/**\n * @fileoverview receives a product_id as param in url\n * @returns json containing product description. * \n */\nconst axios = require('axios').default;\n\nconst transform = inputObject => {\n  const outputObject = {\n    author: {\n      name: \"Diego M.\",\n      lastname: \"Maldini Freyre\"\n    },\n    item: {\n      id: inputObject.id,\n      title: inputObject.title,\n      price: {\n        currency: inputObject.currency_id,\n        amount: Math.floor(inputObject.price),\n        decimals: Math.floor((inputObject.price - Math.floor(inputObject.price)) * 100)\n      },\n      picture: inputObject.thumbnail,\n      condition: inputObject.condition,\n      free_shipping: inputObject.shipping.free_shipping,\n      sold_quantity: inputObject.sold_quantity,\n      description: \"\"\n    }\n  };\n  return outputObject;\n};\n\nconst getDescriptionString = object => {\n  const itemDescriptionURL = `https://api.mercadolibre.com/items/${object.item.id}/description`;\n  axios.get(itemDescriptionURL).then(response => {\n    object.item.description = response.data.plain_text;\n    return object;\n  }).catch(error => console.log(error));\n};\n\nconst getProductDescription = (req, res) => {\n  const itemURL = `https://api.mercadolibre.com/items/${req.params.id}`;\n  axios.get(itemURL).then(response => transform(response.data)).then(object => object.item.description = getDescriptionString(object)).catch(error => console.log(error));\n  res.json(\"Hola\");\n};\n\nmodule.exports = getProductDescription;","map":{"version":3,"sources":["/home/ubuntu/Escritorio/github/app-011-meli-assignment/functions/getProductDescription.js"],"names":["axios","require","default","transform","inputObject","outputObject","author","name","lastname","item","id","title","price","currency","currency_id","amount","Math","floor","decimals","picture","thumbnail","condition","free_shipping","shipping","sold_quantity","description","getDescriptionString","object","itemDescriptionURL","get","then","response","data","plain_text","catch","error","console","log","getProductDescription","req","res","itemURL","params","json","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAP,CAAiBC,OAA/B;;AAEA,MAAMC,SAAS,GAAGC,WAAW,IAAI;AAC7B,QAAMC,YAAY,GAAG;AACjBC,IAAAA,MAAM,EAAE;AACJC,MAAAA,IAAI,EAAE,UADF;AAEJC,MAAAA,QAAQ,EAAE;AAFN,KADS;AAKjBC,IAAAA,IAAI,EAAE;AACFC,MAAAA,EAAE,EAAEN,WAAW,CAACM,EADd;AAEFC,MAAAA,KAAK,EAAEP,WAAW,CAACO,KAFjB;AAGFC,MAAAA,KAAK,EAAE;AACHC,QAAAA,QAAQ,EAAET,WAAW,CAACU,WADnB;AAEHC,QAAAA,MAAM,EAAEC,IAAI,CAACC,KAAL,CAAWb,WAAW,CAACQ,KAAvB,CAFL;AAGHM,QAAAA,QAAQ,EAAEF,IAAI,CAACC,KAAL,CAAW,CAACb,WAAW,CAACQ,KAAZ,GAAoBI,IAAI,CAACC,KAAL,CAAWb,WAAW,CAACQ,KAAvB,CAArB,IAAsD,GAAjE;AAHP,OAHL;AAQFO,MAAAA,OAAO,EAAEf,WAAW,CAACgB,SARnB;AASFC,MAAAA,SAAS,EAAEjB,WAAW,CAACiB,SATrB;AAUFC,MAAAA,aAAa,EAAElB,WAAW,CAACmB,QAAZ,CAAqBD,aAVlC;AAWFE,MAAAA,aAAa,EAAEpB,WAAW,CAACoB,aAXzB;AAYFC,MAAAA,WAAW,EAAE;AAZX;AALW,GAArB;AAoBA,SAAOpB,YAAP;AACH,CAtBD;;AAwBA,MAAMqB,oBAAoB,GAAIC,MAAD,IAAY;AACrC,QAAMC,kBAAkB,GAAI,sCAAqCD,MAAM,CAAClB,IAAP,CAAYC,EAAG,cAAhF;AACAV,EAAAA,KAAK,CAAC6B,GAAN,CAAUD,kBAAV,EACKE,IADL,CACUC,QAAQ,IAAI;AACdJ,IAAAA,MAAM,CAAClB,IAAP,CAAYgB,WAAZ,GAA0BM,QAAQ,CAACC,IAAT,CAAcC,UAAxC;AACA,WAAON,MAAP;AACH,GAJL,EAKKO,KALL,CAKWC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CALpB;AAOH,CATD;;AAWA,MAAMG,qBAAqB,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AACxC,QAAMC,OAAO,GAAI,sCAAqCF,GAAG,CAACG,MAAJ,CAAWhC,EAAG,EAApE;AACAV,EAAAA,KAAK,CAAC6B,GAAN,CAAUY,OAAV,EACKX,IADL,CACUC,QAAQ,IAAI5B,SAAS,CAAC4B,QAAQ,CAACC,IAAV,CAD/B,EAEKF,IAFL,CAEUH,MAAM,IAAIA,MAAM,CAAClB,IAAP,CAAYgB,WAAZ,GAA0BC,oBAAoB,CAACC,MAAD,CAFlE,EAGKO,KAHL,CAGWC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAHpB;AAIAK,EAAAA,GAAG,CAACG,IAAJ,CAAS,MAAT;AACH,CAPD;;AASAC,MAAM,CAACC,OAAP,GAAiBP,qBAAjB","sourcesContent":["/**\n * @fileoverview receives a product_id as param in url\n * @returns json containing product description. * \n */\nconst axios = require('axios').default;\n\nconst transform = inputObject => {\n    const outputObject = {\n        author: {\n            name: \"Diego M.\",\n            lastname: \"Maldini Freyre\"\n        },\n        item: {\n            id: inputObject.id,\n            title: inputObject.title,\n            price: {\n                currency: inputObject.currency_id,\n                amount: Math.floor(inputObject.price),\n                decimals: Math.floor((inputObject.price - Math.floor(inputObject.price)) * 100)\n            },\n            picture: inputObject.thumbnail,\n            condition: inputObject.condition,\n            free_shipping: inputObject.shipping.free_shipping,\n            sold_quantity: inputObject.sold_quantity,\n            description: \"\"\n        }\n    }\n    return outputObject;\n}\n\nconst getDescriptionString = (object) => {\n    const itemDescriptionURL = `https://api.mercadolibre.com/items/${object.item.id}/description`;\n    axios.get(itemDescriptionURL)\n        .then(response => {\n            object.item.description = response.data.plain_text;\n            return object\n        })\n        .catch(error => console.log(error))\n\n};\n\nconst getProductDescription = (req, res) => {\n    const itemURL = `https://api.mercadolibre.com/items/${req.params.id}`\n    axios.get(itemURL)\n        .then(response => transform(response.data))\n        .then(object => object.item.description = getDescriptionString(object))\n        .catch(error => console.log(error))\n    res.json(\"Hola\");\n};\n\nmodule.exports = getProductDescription;"]},"metadata":{},"sourceType":"script"}
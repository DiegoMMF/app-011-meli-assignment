{"ast":null,"code":"import _regeneratorRuntime from\"/home/ubuntu/Escritorio/github/app-011-meli-assignment/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ubuntu/Escritorio/github/app-011-meli-assignment/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ubuntu/Escritorio/github/app-011-meli-assignment/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import axios from'axios';import React,{useEffect,useState}from'react';import{useLocation}from'react-router-dom';import Breadcrumbs from'../components/Breadcrumbs';import List from'../components/List';import SearchBar from'../components/SearchBar';export default function Results(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),categoryID=_useState4[0],setCategoryID=_useState4[1];var location=useLocation();useEffect(function(){// buscamos detalles del item por medio de la custom api\nvar fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var query,result,fetchResult;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:query=new URLSearchParams(location.search).get('q');_context.next=3;return axios(\"https://app-meli-test.herokuapp.com/api/items?q=\".concat(query));case 3:result=_context.sent;setSearch(result.data);// buscamos id de la categoría del producto\nif(!(search!==undefined)){_context.next=10;break;}_context.next=8;return axios(\"https://api.mercadolibre.com/sites/MLA/domain_discovery/search?q=\".concat(query));case 8:fetchResult=_context.sent;setCategoryID(fetchResult.data);case 10:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[location,search]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(SearchBar,{}),search!==undefined?/*#__PURE__*/_jsx(Breadcrumbs,{category:categoryID}):/*#__PURE__*/_jsx(\"div\",{children:\"Loading breadcrumbs...\"}),search!==undefined?/*#__PURE__*/_jsx(List,{items:search.items}):/*#__PURE__*/_jsx(\"div\",{children:\"Loading products...\"})]});}","map":{"version":3,"sources":["/home/ubuntu/Escritorio/github/app-011-meli-assignment/frontend/src/pages/SearchResults.jsx"],"names":["axios","React","useEffect","useState","useLocation","Breadcrumbs","List","SearchBar","Results","search","setSearch","categoryID","setCategoryID","location","fetchData","query","URLSearchParams","get","result","data","undefined","fetchResult","items"],"mappings":"2gBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CAEA,cAAe,SAASC,CAAAA,OAAT,EAAmB,eACJL,QAAQ,EADJ,wCACzBM,MADyB,eACjBC,SADiB,8BAEIP,QAAQ,EAFZ,yCAEzBQ,UAFyB,eAEbC,aAFa,eAGhC,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CAEAF,SAAS,CAAC,UAAM,CACd;AACA,GAAMY,CAAAA,SAAS,0FAAG,gKACVC,KADU,CACF,GAAIC,CAAAA,eAAJ,CAAoBH,QAAQ,CAACJ,MAA7B,EAAqCQ,GAArC,CAAyC,GAAzC,CADE,uBAEKjB,CAAAA,KAAK,2DAC2Be,KAD3B,EAFV,QAEVG,MAFU,eAKhBR,SAAS,CAACQ,MAAM,CAACC,IAAR,CAAT,CACA;AANgB,KAOZV,MAAM,GAAKW,SAPC,iDAQYpB,CAAAA,KAAK,4EACuCe,KADvC,EARjB,QAQRM,WARQ,eAWdT,aAAa,CAACS,WAAW,CAACF,IAAb,CAAb,CAXc,uDAAH,kBAATL,CAAAA,SAAS,0CAAf,CAcAA,SAAS,GACV,CAjBQ,CAiBN,CAACD,QAAD,CAAWJ,MAAX,CAjBM,CAAT,CAqBA,mBACE,oCACE,KAAC,SAAD,IADF,CAGKA,MAAM,GAAKW,SAAZ,cACE,KAAC,WAAD,EAAa,QAAQ,CAAET,UAAvB,EADF,cAEE,+CALN,CAQKF,MAAM,GAAKW,SAAZ,cACE,KAAC,IAAD,EAAM,KAAK,CAAEX,MAAM,CAACa,KAApB,EADF,cAEE,4CAVN,GADF,CAeD","sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from 'react'\nimport { useLocation } from 'react-router-dom';\nimport Breadcrumbs from '../components/Breadcrumbs';\nimport List from '../components/List';\nimport SearchBar from '../components/SearchBar'\n\nexport default function Results() {\n  const [search, setSearch] = useState()\n  const [categoryID, setCategoryID] = useState()\n  const location = useLocation()\n\n  useEffect(() => {\n    // buscamos detalles del item por medio de la custom api\n    const fetchData = async () => {\n      const query = new URLSearchParams(location.search).get('q')\n      const result = await axios(\n        `https://app-meli-test.herokuapp.com/api/items?q=${query}`,\n      );\n      setSearch(result.data);\n      // buscamos id de la categoría del producto\n      if (search !== undefined) {\n        const fetchResult = await axios(\n          `https://api.mercadolibre.com/sites/MLA/domain_discovery/search?q=${query}`,\n        );\n        setCategoryID(fetchResult.data);\n      }\n    };\n    fetchData();\n  }, [location, search]);\n\n\n\n  return (\n    <div>\n      <SearchBar />\n      {\n        (search !== undefined) ?\n          <Breadcrumbs category={categoryID} /> :\n          <div>Loading breadcrumbs...</div>\n      }\n      {\n        (search !== undefined) ?\n          <List items={search.items} /> :\n          <div>Loading products...</div>\n      }\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}